{% extends 'YosimitsoWorkingForumBundle:Common:base.html.twig' %}
{% block forum %}
    {% include 'YosimitsoWorkingForumBundle:Common:header.html.twig' %}
{% trans_default_domain 'YosimitsoWorkingForumBundle' %}
{% if app.session.flashbag.has('success') %}
                <div class="alert-success">
                    <ul>
                  {% for flashMessage in app.session.flashbag.get('success') %}
                      <li>{{ flashMessage }}</li>
                  {% endfor %}
                    </ul>
                </div>
            {% endif %}
               {% if app.session.flashbag.has('error') %}
                <div class="alert-error">
                    <ul>
                  {% for flashMessage in app.session.flashbag.get('error') %}
                      <li>{{ flashMessage }}</li>
                  {% endfor %}
                    </ul>
                </div>
            {% endif %}
             <div id="wf_forum_content">
<div class="wf_breadcrumb">
    <a href="{{ path('workingforum_forum')}}">Forum</a> &rarr; {{subforum.forum.name}}
</div>
 {% if forbidden is defined and forbidden %}
     <div class="wf_forum">
     <div class="wf_empty_forum">{{ 'forum.must_be_logged' | trans }}</div>
     </div>
 {% else %}    
    
{% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
 <div class="wf_new_thread_button">
    <a class="wf_button wf_add" href="{{ path('workingforum_new_thread', {'subforum_slug' : subforum.slug}) }}"><span class="wf_add-plus"></span>{{ ('forum.new_thread' | trans) }}</a>
    </div>
    {% endif %}
<div id="wf_forum">
    <div class="wf_forum">
    <h1>{{ subforum.name }}</h1>
   
<table class="wf_thread_list">
    {# <thead>
        <tr>
            <th>{{ 'forum.thread' | trans }}</th>
            <th>{{ 'forum.author' | trans }}</th>
            <th>{{ 'forum.replies' | trans }}
    </thead> #}
    {% if thread_list is not empty %}
    {% for thread in thread_list %}
        <tr {% if thread.pin %} class="wf_pin" {% elseif thread.resolved  %} class="wf_resolved"{% endif %}>
            <td class="wf_sub_name">
                
                {% if thread.locked %}
                <img src="{{ asset('bundles/yosimitsoworkingforum/images/lock.png') }}" width="24" style="vertical-align:bottom" />
                
                {% endif %}
                {% if thread.pin %}
                    <span class="wf_pinText"><img src="{{ asset('bundles/yosimitsoworkingforum/images/pin.png') }}" width="16"/>{#{{ 'forum.pin' | trans }} : #}</span> 
                    {% elseif thread.resolved %}
                     <span class="wf_pinText"><img src="{{ asset('bundles/yosimitsoworkingforum/images/tick.png') }}" width="16"/>{#{{ 'forum.resolved' | trans }} : #}</span>    
                {% endif %}    
                <a href="{{ path( 'workingforum_thread', {'subforum_slug' : subforum.slug, 'thread_slug' : thread.slug}) }}">{{ thread.label }}</a>  
                
             
                <br /><span class="wf_sublabel">{{ thread.sublabel }}</span></td>
            <td class="wf_sub_stat">{{ thread.nbReplies}} {{ 'forum.nbPost' | trans }}</td>
            <td class="wf_sub_lastreply">{{'forum.last_reply_date' | trans }}<br />{{ thread.cdate | date(date_format)}} {{ 'forum.by' | trans }} {{ thread.author.username}}</td>
            
            
            
        
        
        
    {% endfor %}
    </table>
    {% else %}
    </table>
    <div class="wf_empty_forum">{{ 'forum.empty_forum' | trans }}</div>
    {% endif %}    


    </div>
</div>
    {{ knp_pagination_render(thread_list) }}
    
    {% endif %}
             </div>
    
{% endblock %}