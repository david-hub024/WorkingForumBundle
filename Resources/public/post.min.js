!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([,,,,,,,,function(e,t,n){n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17)},function(e,t,n){},function(e,t,n){},function(e,t,n){var r,i={extensions:{},forEach:function(e,t){if("function"==typeof e.forEach)e.forEach(t);else{var n,r=e.length;for(n=0;n<r;n++)t(e[n],n,e)}},converter:function(e){var t,n,r,a=0,o=[],s=[];if(this.makeHtml=function(e,a){t={},n={},r=[],e=(e=(e=(e=e.replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"),e=(e=F(e="\n\n"+e+"\n\n")).replace(/^[ \t]+$/gm,""),i.forEach(o,(function(t){e=d(t,e)})),e=k(e),e=f(e),e=h(e),e=g(e),e=(e=(e=L(e)).replace(/~D/g,"$$")).replace(/~T/g,"~"),i.forEach(s,(function(t){e=d(t,e)}));var l=":("+["smile","wink","angry","biggrin","crying","frown","tongue","yawn","zipped","sick","whistle","evil","stress","delicious","bashful","bored","confused","heart","love","oh","nerdy","present","sun","sunglasses","xd","football","tennis","basketball","thumbup","thumbdown"].join("|")+"):";return e=(e=e.replace(new RegExp(l,"g"),'<img src="'+a+'images/smiley/$1.png" />')).replace(/\[quote=(\d+)\]/g,(function(e,t){var n=document.querySelector("#wf_post\\["+t+"\\] .wf_username");return n?"<blockquote><br /><strong>"+n.innerHTML+" "+storeJs.trans["forum.has_written"]+"</strong><br />"+document.querySelector("#wf_post\\["+t+"\\] .wf_post_content").innerHTML+"</blockquote>":"<blockquote><br /><em>"+storeJs.trans["message.quote_unavailable"].replace("%id%",t)+"</em></blockquote>"}))},e&&e.extensions){var l=this;i.forEach(e.extensions,(function(e){if("string"==typeof e&&(e=i.extensions[function(e){return e.replace(/[_-]||\s/g,"").toLowerCase()}(e)]),"function"!=typeof e)throw"Extension '"+e+"' could not be loaded.  It was either not found or is not a valid extension.";i.forEach(e(l),(function(e){e.type?"language"===e.type||"lang"===e.type?o.push(e):"output"!==e.type&&"html"!==e.type||s.push(e):s.push(e)}))}))}function c(e){return e=C(e),e=m(e),e=E(e),e=w(e),e=v(e),e=j(e),e=T(e),(e=I(e)).replace(/  +\n/g," <br />\n")}var u,d=function(e,t){if(e.regex){var n=new RegExp(e.regex,"g");return t.replace(n,e.replace)}if(e.filter)return e.filter(t)},h=function(e){return(e=(e+="~0").replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,(function(e,r,i,a,o){return r=r.toLowerCase(),t[r]=T(i),a?a+o:(o&&(n[r]=o.replace(/"/g,"&quot;")),"")}))).replace(/~0/,"")},f=function(e){return(e=(e=(e=(e=(e=(e=e.replace(/\n/g,"\n\n")).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,p)).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,p)).replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,p)).replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,p)).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,p)).replace(/\n\n/g,"\n")},p=function(e,t){var n=t;return n=(n=(n=n.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),"\n\n~K"+(r.push(n)-1)+"K\n\n"},g=function(e){e=x(e);var t=S("<hr />");return e=(e=(e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,t)).replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,t)).replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,t),e=$(e),e=_(e),e=P(e),e=f(e),z(e)},m=function(e){return e.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,(function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return M(t,"\\`*_")}))},v=function(e){return(e=(e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,b)).replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,b)).replace(/(\[([^\[\]]+)\])()()()()()/g,b)},b=function(e,r,i,a,o,s,l,c){null==c&&(c="");var u=r,d=i,h=a.toLowerCase(),f=o,p=c;if(""==f)if(""==h&&(h=d.toLowerCase().replace(/ ?\n/g," ")),f="#"+h,null!=t[h])f=t[h],null!=n[h]&&(p=n[h]);else{if(!(-1<u.search(/\(\s*\)$/m)))return u;f=""}var g='<a href="'+(f=M(f,"*_"))+'"';return""!=p&&(p=p.replace(/"/g,"&quot;"),g+=' title="'+(p=M(p,"*_"))+'"'),g+">"+d+"</a>"},w=function(e){return(e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,y)).replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,y)},y=function(e,r,i,a,o,s,l,c){var u=r,d=i,h=a.toLowerCase(),f=o,p=c;if(p=p||"",""==f){if(""==h&&(h=d.toLowerCase().replace(/ ?\n/g," ")),f="#"+h,null==t[h])return u;f=t[h],null!=n[h]&&(p=n[h])}d=d.replace(/"/g,"&quot;");var g='<img src="'+(f=M(f,"*_"))+'" alt="'+d+'"';return p=p.replace(/"/g,"&quot;"),(g+=' title="'+(p=M(p,"*_"))+'"')+" />"},x=function(e){function t(e){return e.replace(/[^\w]/g,"").toLowerCase()}return(e=(e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,(function(e,n){return S('<h1 id="'+t(n)+'">'+c(n)+"</h1>")}))).replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,(function(e,n){return S('<h2 id="'+t(n)+'">'+c(n)+"</h2>")}))).replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,(function(e,n,r){var i=n.length;return S("<h"+i+' id="'+t(r)+'">'+c(r)+"</h"+i+">")}))},$=function(e){e+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return(e=a?e.replace(t,(function(e,t,n){var r=t,i=-1<n.search(/[*+-]/g)?"ul":"ol";r=r.replace(/\n{2,}/g,"\n\n\n");var a=u(r);return"<"+i+">"+(a=a.replace(/\s+$/,""))+"</"+i+">\n"})):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e.replace(t,(function(e,t,n,r){var i=t,a=n,o=-1<r.search(/[*+-]/g)?"ul":"ol",s=(a=a.replace(/\n{2,}/g,"\n\n\n"),u(a));return i+"<"+o+">\n"+s+"</"+o+">\n"})))).replace(/~0/,"")};u=function(e){return a++,e=e.replace(/\n{2,}$/,"\n"),e=(e=(e+="~0").replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,(function(e,t,n,r,i){var a=i;return"<li>"+(a=t||-1<a.search(/\n{2,}/)?g(N(a)):c(a=(a=$(N(a))).replace(/\n$/,"")))+"</li>\n"}))).replace(/~0/g,""),a--,e};var _=function(e){return(e=(e+="~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,(function(e,t,n){var r=t,i=n;return r=B(N(r)),r=(r=(r=F(r)).replace(/^\n+/g,"")).replace(/\n+$/g,""),S(r="<pre><code>"+r+"\n</code></pre>")+i}))).replace(/~0/,"")},k=function(e){return(e=(e+="~0").replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,(function(e,t,n){var r=t,i=n;return i=B(i),i=(i=(i=F(i)).replace(/^\n+/g,"")).replace(/\n+$/g,""),S(i="<pre><code"+(r?' class="'+r+'"':"")+">"+i+"\n</code></pre>")}))).replace(/~0/,"")},S=function(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(r.push(e)-1)+"K\n\n"},C=function(e){return e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(e,t,n,r,i){var a=r;return a=(a=a.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),t+"<code>"+(a=B(a))+"</code>"}))},B=function(e){return e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),M(e,"*_{}[]\\",!1)},I=function(e){return(e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>")).replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},P=function(e){return e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,(function(e,t){var n=t;return n=(n=(n=n.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""),n=(n=(n=g(n)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(e,t){var n=t;return(n=n.replace(/^  /gm,"~0")).replace(/~0/g,"")})),S("<blockquote>\n"+n+"\n</blockquote>")}))},z=function(e){for(var t=(e=(e=e.replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),n=[],i=t.length,a=0;a<i;a++){var o=t[a];0<=o.search(/~K(\d+)K/g)?n.push(o):0<=o.search(/\S/)&&(o=(o=c(o)).replace(/^([ \t]*)/g,"<p>"),o+="</p>",n.push(o))}for(i=n.length,a=0;a<i;a++)for(;0<=n[a].search(/~K(\d+)K/);){var s=r[RegExp.$1];s=s.replace(/\$/g,"$$$$"),n[a]=n[a].replace(/~K\d+K/,s)}return n.join("\n\n")},T=function(e){return(e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?\$!])/gi,"&lt;")},E=function(e){return(e=e.replace(/\\(\\)/g,q)).replace(/\\([`*_{}\[\]()>#+-.!])/g,q)},j=function(e){return(e=e.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>')).replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,(function(e,t){return O(L(t))}))},O=function(e){var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return(e='<a href="'+(e=(e="mailto:"+e).replace(/./g,(function(e){if("@"==e)e=t[Math.floor(2*Math.random())](e);else if(":"!=e){var n=Math.random();e=.9<n?t[2](e):.45<n?t[1](e):t[0](e)}return e})))+'">'+e+"</a>").replace(/">.+:/g,'">')},L=function(e){return e.replace(/~E(\d+)E/g,(function(e,t){var n=parseInt(t);return String.fromCharCode(n)}))},N=function(e){return(e=e.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")},F=function(e){return(e=(e=(e=(e=e.replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"~A~B")).replace(/~B(.+?)~A/g,(function(e,t,n){for(var r=t,i=4-r.length%4,a=0;a<i;a++)r+=" ";return r}))).replace(/~A/g,"    ")).replace(/~B/g,"")},M=function(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return e.replace(i,q)},q=function(e,t){return"~E"+t.charCodeAt(0)+"E"}}};e.exports=i,window.Showdown=i,void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){function r(e){return[{type:"lang",regex:"\\B(\\\\)?@([\\S]+)\\b",replace:function(e,t,n){return"\\"===t?e:'<a href="http://twitter.com/'+n+'">@'+n+"</a>"}},{type:"lang",regex:"\\B(\\\\)?#([\\S]+)\\b",replace:function(e,t,n){return"\\"===t?e:'<a href="http://twitter.com/search/%23'+n+'">#'+n+"</a>"}},{type:"lang",regex:"\\\\@",replace:"@"}]}"undefined"!=typeof window&&window.Showdown&&window.Showdown.extensions&&(window.Showdown.extensions.twitter=r),e.exports=r},function(e,t,n){function r(e){return[{type:"lang",regex:"(~T){2}([^~]+)(~T){2}",replace:function(e,t,n,r){return"<del>"+n+"</del>"}}]}"undefined"!=typeof window&&window.Showdown&&window.Showdown.extensions&&(window.Showdown.extensions.github=r),e.exports=r},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"use strict";function t(t,r){e.each(["autofocus","savable","hideable","width","height","resize","iconlibrary","language","footer","fullscreen","hiddenButtons","disabledButtons"],(function(i,a){void 0!==e(t).data(a)&&((r="object"==n(r)?r:{})[a]=e(t).data(a))})),this.$ns="bootstrap-markdown",this.$element=e(t),this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null},this.$options=e.extend(!0,{},e.fn.markdown.defaults,r,this.$element.data("options")),this.$oldContent=null,this.$isPreview=!1,this.$isFullscreen=!1,this.$editor=null,this.$textarea=null,this.$handler=[],this.$callback=[],this.$nextTab=[],this.showEditor()}t.prototype={constructor:t,__alterButtons:function(t,n){var r=this.$handler,i="all"==t,a=this;e.each(r,(function(e,r){!1==(!i&&r.indexOf(t)<0)&&n(a.$editor.find('button[data-handler="'+r+'"]'))}))},__buildButtons:function(t,n){var r,i=this.$ns,a=this.$handler,o=this.$callback;for(r=0;r<t.length;r++){var s,l=t[r];for(s=0;s<l.length;s++){var c,u=l[s].data,d=e("<div/>",{class:"btn-group"});for(c=0;c<u.length;c++){var h,f,p=u[c],g=i+"-"+p.name,m=this.__getIcon(p.icon),v=p.btnText?p.btnText:"",b=p.btnClass?p.btnClass:"btn",w=p.tabIndex?p.tabIndex:"-1",y=void 0!==p.hotkey?p.hotkey:"",x=void 0!==jQuery.hotkeys&&""!==y?" ("+y+")":"";(h=e("<button></button>")).text(" "+this.__localize(v)).addClass("btn-default btn-sm").addClass(b),b.match(/btn\-(primary|success|info|warning|danger|link)/)&&h.removeClass("btn-default"),h.attr({type:"button",title:this.__localize(p.title)+x,tabindex:w,"data-provider":i,"data-handler":g,"data-hotkey":y}),!0===p.toggle&&h.attr("data-toggle","button"),(f=e("<span/>")).addClass(m),f.prependTo(h),d.append(h),a.push(g),o.push(p.callback)}n.append(d)}}return n},__setListener:function(){var t=void 0!==this.$textarea.attr("rows"),n=5<this.$textarea.val().split("\n").length?this.$textarea.val().split("\n").length:"5",r=t?this.$textarea.attr("rows"):n;this.$textarea.attr("rows",r),this.$options.resize&&this.$textarea.css("resize",this.$options.resize),this.$textarea.on("focus",e.proxy(this.focus,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)).on("change",e.proxy(this.change,this)).on("select",e.proxy(this.select,this)),this.eventSupported("keydown")&&this.$textarea.on("keydown",e.proxy(this.keydown,this)),this.$textarea.data("markdown",this)},__handle:function(t){var n=e(t.currentTarget),r=this.$handler,i=this.$callback,a=n.attr("data-handler"),o=i[r.indexOf(a)];e(t.currentTarget).focus(),o(this),this.change(this),a.indexOf("cmdSave")<0&&this.$textarea.focus(),t.preventDefault()},__localize:function(t){var n=e.fn.markdown.messages,r=this.$options.language;return void 0!==n&&void 0!==n[r]&&void 0!==n[r][t]?n[r][t]:t},__getIcon:function(e){return"object"==n(e)?e[this.$options.iconlibrary]:e},setFullscreen:function(t){var n=this.$editor,r=this.$textarea;!0===t?(n.addClass("md-fullscreen-mode"),e("body").addClass("md-nooverflow"),this.$options.onFullscreen(this)):(n.removeClass("md-fullscreen-mode"),e("body").removeClass("md-nooverflow"),1==this.$isPreview&&this.hidePreview().showPreview()),this.$isFullscreen=t,r.focus()},showEditor:function(){var t,r=this,i=this.$ns,a=this.$element,o=(a.css("height"),a.css("width"),this.$editable),s=this.$handler,l=this.$callback,c=this.$options,u=e("<div/>",{class:"md-editor",click:function(){r.focus()}});if(null===this.$editor){var d=e("<div/>",{class:"md-header btn-toolbar"}),h=[];if(0<c.buttons.length&&(h=h.concat(c.buttons[0])),0<c.additionalButtons.length&&(h=h.concat(c.additionalButtons[0])),0<c.reorderButtonGroups.length&&(h=h.filter((function(e){return-1<c.reorderButtonGroups.indexOf(e.name)})).sort((function(e,t){return c.reorderButtonGroups.indexOf(e.name)<c.reorderButtonGroups.indexOf(t.name)?-1:c.reorderButtonGroups.indexOf(e.name)>c.reorderButtonGroups.indexOf(t.name)?1:0}))),0<h.length&&(d=this.__buildButtons([h],d)),c.fullscreen.enable&&d.append('<div class="md-controls"><a class="md-control md-control-fullscreen" href="#"><span class="'+this.__getIcon(c.fullscreen.icons.fullscreenOn)+'"></span></a></div>').on("click",".md-control-fullscreen",(function(e){e.preventDefault(),r.setFullscreen(!0)})),u.append(d),a.is("textarea"))a.before(u),(t=a).addClass("md-input"),u.append(t);else{var f="function"==typeof toMarkdown?toMarkdown(a.html()):a.html(),p=e.trim(f);t=e("<textarea/>",{class:"md-input",val:p}),u.append(t),o.el=a,o.type=a.prop("tagName").toLowerCase(),o.content=a.html(),e(a[0].attributes).each((function(){o.attrKeys.push(this.nodeName),o.attrValues.push(this.nodeValue)})),a.replaceWith(u)}var g,m=e("<div/>",{class:"md-footer"}),v=!1;if(c.savable){v=!0;var b="cmdSave";s.push(b),l.push(c.onSave),m.append('<button class="btn btn-success" data-provider="'+i+'" data-handler="'+b+'"><i class="icon icon-white icon-ok"></i> '+this.__localize("Save")+"</button>")}if(g="function"==typeof c.footer?c.footer(this):c.footer,""!==e.trim(g)&&(v=!0,m.append(g)),v&&u.append(m),c.width&&"inherit"!==c.width&&(jQuery.isNumeric(c.width)?(u.css("display","table"),t.css("width",c.width+"px")):u.addClass(c.width)),c.height&&"inherit"!==c.height)if(jQuery.isNumeric(c.height)){var w=c.height;d&&(w=Math.max(0,w-d.outerHeight())),m&&(w=Math.max(0,w-m.outerHeight())),t.css("height",w+"px")}else u.addClass(c.height);this.$editor=u,this.$textarea=t,this.$editable=o,this.$oldContent=this.getContent(),this.__setListener(),this.$editor.attr("id",(new Date).getTime()),this.$editor.on("click",'[data-provider="bootstrap-markdown"]',e.proxy(this.__handle,this)),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this.eventSupported("keydown")&&"object"===n(jQuery.hotkeys)&&d.find('[data-provider="bootstrap-markdown"]').each((function(){var n=e(this),r=n.attr("data-hotkey");""!==r.toLowerCase()&&t.bind("keydown",r,(function(){return n.trigger("click"),!1}))})),"preview"===c.initialstate?this.showPreview():"fullscreen"===c.initialstate&&c.fullscreen.enable&&this.setFullscreen(!0)}else this.$editor.show();return c.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active")),c.fullscreen.enable&&!1!==c.fullscreen&&(this.$editor.append('<div class="md-fullscreen-controls"><a href="#" class="exit-fullscreen" title="Exit fullscreen"><span class="'+this.__getIcon(c.fullscreen.icons.fullscreenOff)+'"></span></a></div>'),this.$editor.on("click",".exit-fullscreen",(function(e){e.preventDefault(),r.setFullscreen(!1)}))),this.hideButtons(c.hiddenButtons),this.disableButtons(c.disabledButtons),c.onShow(this),this},parseContent:function(e){return e=e||this.$textarea.val(),this.$options.parser?this.$options.parser(e):"object"==("undefined"==typeof markdown?"undefined":n(markdown))?markdown.toHTML(e):"function"==typeof marked?marked(e):e},showPreview:function(){var t,n,r=this.$options,i=this.$textarea,a=i.next(),o=e("<div/>",{class:"md-preview","data-provider":"markdown-preview"});return 1==this.$isPreview||(this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview"),t="string"==typeof(n=r.onPreview(this))?n:this.parseContent(),o.html(t),a&&"md-footer"==a.attr("class")?o.insertBefore(a):i.parent().append(o),o.css({width:parseInt(i.outerWidth()-21)+"px",height:parseInt(i.outerHeight()-22)+"px"}),this.$options.resize&&o.css("resize",this.$options.resize),i.hide(),o.data("markdown",this),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all"))),this},hidePreview:function(){return this.$isPreview=!1,this.$editor.find('div[data-provider="markdown-preview"]').remove(),this.enableButtons("all"),this.disableButtons(this.$options.disabledButtons),this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(e){return this.$textarea.val(e),this},findSelection:function(e){var t;if(0<=(t=this.getContent().indexOf(e))&&0<e.length){var n,r=this.getSelection();return this.setSelection(t,t+e.length),n=this.getSelection(),this.setSelection(r.start,r.end),n}return null},getSelection:function(){var e=this.$textarea[0];return("selectionStart"in e&&function(){var t=e.selectionEnd-e.selectionStart;return{start:e.selectionStart,end:e.selectionEnd,length:t,text:e.value.substr(e.selectionStart,t)}}||function(){return null})()},setSelection:function(e,t){var n=this.$textarea[0];return("selectionStart"in n&&function(){n.selectionStart=e,n.selectionEnd=t}||function(){return null})()},replaceSelection:function(e){var t=this.$textarea[0];return("selectionStart"in t&&function(){return t.value=t.value.substr(0,t.selectionStart)+e+t.value.substr(t.selectionEnd,t.value.length),t.selectionStart=t.value.length,this}||function(){return t.value+=e,jQuery(t)})()},getNextTab:function(){if(0===this.$nextTab.length)return null;var e,t=this.$nextTab.shift();return"function"==typeof t?e=t():"object"==n(t)&&0<t.length&&(e=t),e},setNextTab:function(e,t){if("string"==typeof e){var n=this;this.$nextTab.push((function(){return n.findSelection(e)}))}else if("number"==typeof e&&"number"==typeof t){var r=this.getSelection();this.setSelection(e,t),this.$nextTab.push(this.getSelection()),this.setSelection(r.start,r.end)}},__parseButtonNameParam:function(e){return"string"==typeof e?e.split(","):e},enableButtons:function(t){var n=this.__parseButtonNameParam(t),r=this;return e.each(n,(function(e,t){r.__alterButtons(n[e],(function(e){e.removeAttr("disabled")}))})),this},disableButtons:function(t){var n=this.__parseButtonNameParam(t),r=this;return e.each(n,(function(e,t){r.__alterButtons(n[e],(function(e){e.attr("disabled","disabled")}))})),this},hideButtons:function(t){var n=this.__parseButtonNameParam(t),r=this;return e.each(n,(function(e,t){r.__alterButtons(n[e],(function(e){e.addClass("hidden")}))})),this},showButtons:function(t){var n=this.__parseButtonNameParam(t),r=this;return e.each(n,(function(e,t){r.__alterButtons(n[e],(function(e){e.removeClass("hidden")}))})),this},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},keyup:function(e){var t=!1;switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:var n;if(null!==(n=this.getNextTab())){var r=this;setTimeout((function(){r.setSelection(n.start,n.end)}),500),t=!0}else{var i=this.getSelection();t=(i.start!=i.end||i.end!=this.getContent().length)&&(this.setSelection(this.getContent().length,this.getContent().length),!0)}break;case 13:t=!1;break;case 27:this.$isFullscreen&&this.setFullscreen(!1),t=!1;break;default:t=!1}t&&(e.stopPropagation(),e.preventDefault()),this.$options.onChange(this)},change:function(e){return this.$options.onChange(this),this},select:function(e){return this.$options.onSelect(this),this},focus:function(t){var n=this.$options,r=(n.hideable,this.$editor);return r.addClass("active"),e(document).find(".md-editor").each((function(){var t;e(this).attr("id")!==r.attr("id")&&(null===(t=e(this).find("textarea").data("markdown"))&&(t=e(this).find('div[data-provider="markdown-preview"]').data("markdown")),t&&t.blur())})),n.onFocus(this),this},blur:function(t){var n=this.$options,r=n.hideable,i=this.$editor,a=this.$editable;if(i.hasClass("active")||0===this.$element.parent().length){if(i.removeClass("active"),r)if(null!==a.el){var o=e("<"+a.type+"/>"),s=this.getContent(),l=this.parseContent(s);e(a.attrKeys).each((function(e,t){o.attr(a.attrKeys[e],a.attrValues[e])})),o.html(l),i.replaceWith(o)}else i.hide();n.onBlur(this)}return this}};var r=e.fn.markdown;function i(e){var t=e;t.data("markdown")?t.data("markdown").showEditor():t.markdown()}e.fn.markdown=function(r){return this.each((function(){var i=e(this),a=i.data("markdown"),o="object"==n(r)&&r;a||i.data("markdown",a=new t(this,o))}))},e.fn.markdown.messages={},e.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",language:"en",initialstate:"editor",parser:null,buttons:[[{name:"groupFont",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:"glyphicon glyphicon-bold",fa:"fa fa-bold","fa-3":"icon-bold"},callback:function(e){var t,n,r=e.getSelection(),i=e.getContent();t=0===r.length?e.__localize("strong text"):r.text,n="**"===i.substr(r.start-2,2)&&"**"===i.substr(r.end,2)?(e.setSelection(r.start-2,r.end+2),e.replaceSelection(t),r.start-2):(e.replaceSelection("**"+t+"**"),r.start+2),e.setSelection(n,n+t.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:"glyphicon glyphicon-italic",fa:"fa fa-italic","fa-3":"icon-italic"},callback:function(e){var t,n,r=e.getSelection(),i=e.getContent();t=0===r.length?e.__localize("emphasized text"):r.text,n="_"===i.substr(r.start-1,1)&&"_"===i.substr(r.end,1)?(e.setSelection(r.start-1,r.end+1),e.replaceSelection(t),r.start-1):(e.replaceSelection("_"+t+"_"),r.start+1),e.setSelection(n,n+t.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",icon:{glyph:"glyphicon glyphicon-header",fa:"fa fa-header","fa-3":"icon-font"},callback:function(e){var t,n,r,i,a=e.getSelection(),o=e.getContent();t=0===a.length?e.__localize("heading text"):a.text+"\n",r=4,n="### "===o.substr(a.start-r,r)||(r=3,"###"===o.substr(a.start-r,r))?(e.setSelection(a.start-r,a.end),e.replaceSelection(t),a.start-r):0<a.start&&(i=o.substr(a.start-1,1))&&"\n"!=i?(e.replaceSelection("\n\n### "+t),a.start+6):(e.replaceSelection("### "+t),a.start+4),e.setSelection(n,n+t.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",hotkey:"Ctrl+L",icon:{glyph:"glyphicon glyphicon-link",fa:"fa fa-link","fa-3":"icon-link"},callback:function(t){var n,r,i,a=t.getSelection();if(t.getContent(),n=0===a.length?t.__localize("enter link description here"):a.text,null!==(i=prompt(t.__localize("Insert Hyperlink"),"http://"))&&""!==i&&"http://"!==i&&"http"===i.substr(0,4)){var o=e("<div>"+i+"</div>").text();t.replaceSelection("["+n+"]("+o+")"),r=a.start+1,t.setSelection(r,r+n.length)}}},{name:"cmdImage",title:"Image",hotkey:"Ctrl+G",icon:{glyph:"glyphicon glyphicon-picture",fa:"fa fa-picture-o","fa-3":"icon-picture"},callback:function(t){var n,r,i,a=t.getSelection();if(t.getContent(),n=0===a.length?t.__localize("enter image description here"):a.text,null!==(i=prompt(t.__localize("Insert Image Hyperlink"),"http://"))&&""!==i&&"http://"!==i&&"http"===i.substr(0,4)){var o=e("<div>"+i+"</div>").text();t.replaceSelection("!["+n+"]("+o+' "'+t.__localize("enter image title here")+'")'),r=a.start+2,t.setNextTab(t.__localize("enter image title here")),t.setSelection(r,r+n.length)}}}]},{name:"groupMisc",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:"glyphicon glyphicon-list",fa:"fa fa-list","fa-3":"icon-list-ul"},callback:function(t){var n,r,i=t.getSelection();if(t.getContent(),0===i.length)n=t.__localize("list text here"),t.replaceSelection("- "+n),r=i.start+2;else if(i.text.indexOf("\n")<0)n=i.text,t.replaceSelection("- "+n),r=i.start+2;else{var a=[];n=(a=i.text.split("\n"))[0],e.each(a,(function(e,t){a[e]="- "+t})),t.replaceSelection("\n\n"+a.join("\n")),r=i.start+4}t.setSelection(r,r+n.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:"glyphicon glyphicon-th-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol"},callback:function(t){var n,r,i=t.getSelection();if(t.getContent(),0===i.length)n=t.__localize("list text here"),t.replaceSelection("1. "+n),r=i.start+3;else if(i.text.indexOf("\n")<0)n=i.text,t.replaceSelection("1. "+n),r=i.start+3;else{var a=[];n=(a=i.text.split("\n"))[0],e.each(a,(function(e,t){a[e]="1. "+t})),t.replaceSelection("\n\n"+a.join("\n")),r=i.start+5}t.setSelection(r,r+n.length)}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:"glyphicon glyphicon-asterisk",fa:"fa fa-code","fa-3":"icon-code"},callback:function(e){var t,n,r=e.getSelection(),i=e.getContent();t=0===r.length?e.__localize("code text here"):r.text,n="```\n"===i.substr(r.start-4,4)&&"\n```"===i.substr(r.end,4)?(e.setSelection(r.start-4,r.end+4),e.replaceSelection(t),r.start-4):"`"===i.substr(r.start-1,1)&&"`"===i.substr(r.end,1)?(e.setSelection(r.start-1,r.end+1),e.replaceSelection(t),r.start-1):-1<i.indexOf("\n")?(e.replaceSelection("```\n"+t+"\n```"),r.start+4):(e.replaceSelection("`"+t+"`"),r.start+1),e.setSelection(n,n+t.length)}},{name:"cmdQuote",hotkey:"Ctrl+Q",title:"Quote",icon:{glyph:"glyphicon glyphicon-comment",fa:"fa fa-quote-left","fa-3":"icon-quote-left"},callback:function(t){var n,r,i=t.getSelection();if(t.getContent(),0===i.length)n=t.__localize("quote here"),t.replaceSelection("> "+n),r=i.start+2;else if(i.text.indexOf("\n")<0)n=i.text,t.replaceSelection("> "+n),r=i.start+2;else{var a=[];n=(a=i.text.split("\n"))[0],e.each(a,(function(e,t){a[e]="> "+t})),t.replaceSelection("\n\n"+a.join("\n")),r=i.start+4}t.setSelection(r,r+n.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:!0,hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-primary btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search","fa-3":"icon-search"},callback:function(e){!1===e.$isPreview?e.showPreview():e.hidePreview()}}]}]],additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",fullscreen:{enable:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full"},fullscreenOff:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small"}}},onShow:function(e){},onPreview:function(e){},onSave:function(e){},onBlur:function(e){},onFocus:function(e){},onChange:function(e){},onFullscreen:function(e){},onSelect:function(e){}},e.fn.markdown.Constructor=t,e.fn.markdown.noConflict=function(){return e.fn.markdown=r,this},e(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',(function(t){i(e(this)),t.preventDefault()})).on("click focusin",(function(t){var n;n=e(document.activeElement),e(document).find(".md-editor").each((function(){var t=e(this),r=n.closest(".md-editor")[0]===this,i=t.find("textarea").data("markdown")||t.find('div[data-provider="markdown-preview"]').data("markdown");i&&!r&&i.blur()}))})).ready((function(){e('textarea[data-provide="markdown"]').each((function(){i(e(this))}))}))}(window.jQuery)},function(e,t){jQuery.fn.markdown.messages.fr={Bold:"Gras",Italic:"Italique",Heading:"Titre","URL/Link":"Insérer un lien HTTP",Image:"Insérer une image",List:"Liste à puces",Preview:"Prévisualiser","strong text":"texte important","emphasized text":"texte souligné","heading text":"texte d'entête","enter link description here":"entrez la description du lien ici","Insert Hyperlink":"Insérez le lien hypertexte","enter image description here":"entrez la description de l'image ici","Insert Image Hyperlink":"Insérez le lien hypertexte de l'image","enter image title here":"entrez le titre de l'image ici","list text here":"texte à puce ici"}},function(e,t){var n;(n=jQuery).fn.nicefileinput=function(e){var t={label:"Browse...",fullPath:!1};return e&&n.extend(t,e),this.each((function(){var e=this;if(void 0===n(e).attr("data-styled")){var r=Math.round(1e4*Math.random()),i=(new Date).getTime()+r.toString(),a=n('<input type="text" readonly="readonly">').css({display:"block",float:"left",margin:0,padding:"0 5px"}).addClass("NFI-filename NFI"+i),o=n("<div>").css({overflow:"hidden",position:"relative",display:"block",float:"left","white-space":"nowrap","text-align":"center"}).addClass("NFI-button NFI"+i).attr("disabled",n(e).attr("disabled")).html(t.label);n(e).after(a),n(e).wrap(o),n(".NFI"+i).wrapAll('<div class="NFI-wrapper" id="NFI-wrapper-'+i+'" />'),n(".NFI-wrapper").css({overflow:"auto",display:"inline-block"}),n("#NFI-wrapper-"+i).addClass(n(e).attr("class")),n(e).css({opacity:0,position:"absolute",border:"none",margin:0,padding:0,top:0,right:0,cursor:"pointer",height:"60px"}).addClass("NFI-current"),n(e).on("change",(function(){var r=n(e).val();if(t.fullPath)a.val(r);else{var i=r.split(/[/\\]/);a.val(i[i.length-1])}})),n(e).attr("data-styled",!0)}}))}},function(e,t){jQuery(document).ready((function(){jQuery(".wf_textarea_post").markdown({language:storeJs.locale,onPreview:function(e){return new Showdown.converter({extensions:["twitter","github"]}).makeHtml(nl2br(e.getContent()),storeJs.assetPath)},fullscreen:{enable:!1}}),jQuery("#wf_form_post").submit((function(t){getCookie("post_editor_".concat(storeJs.postEditorId))&&(t.preventDefault(),clearInterval(e),eraseCookie("post_editor_".concat(storeJs.postEditorId)),t.target.submit())})),nl2br=function(e){return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1".concat("<br />","$2"))},getCookie=function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null},setTimeout((function(){getSavedPostEditor()}),1e3),getSavedPostEditor=function(){var e=document.getElementsByClassName("wf_textarea_post")[0],t=document.getElementsByClassName("wf_thread")[0].getAttribute("data-id"),n=getCookie("post_editor_".concat(t));n&&(e.value=n)},setCookie=function(e,t,n){var r="";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),r="; expires=".concat(i.toUTCString())}document.cookie="".concat(e,"=").concat(t||"").concat(r,"; path=/")},eraseCookie=function(e){var t=new Date;t.setTime(t.getTime()-864e5);var n="expires=".concat(t.toGMTString());window.document.cookie="".concat(e,"=; ").concat(n,"; path=/")};var e=setInterval((function(){savePostEditor()}),3e4);savePostEditor=function(){var e=document.getElementsByClassName("wf_textarea_post")[0];if(e&&e.value){setCookie("post_editor_".concat(storeJs.postEditorId),e.value,30);var t=new Date;if(jQuery("#saved_draft_msg").length){var n="".concat(storeJs.trans["message.post_saved_draft"]," ").concat(t.getHours(),":").concat(t.getMinutes()<10?"0":"").concat(t.getMinutes());jQuery("#saved_draft_msg").html(n)}else{var r='\n                <div id="saved_draft_msg" class="wf_small_message">\n                '.concat(storeJs.trans["message.post_saved_draft"]," ").concat(t.getHours(),":").concat(t.getMinutes()<10?"0":"").concat(t.getMinutes(),"\n                </div>");jQuery(".md-header").after(r)}}}}))}]);